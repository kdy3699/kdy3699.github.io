<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>설문조사</title>
</head>
<body>
  <h2>식사여부 & 버스탑승여부 설문</h2>
  <form id="surveyForm">
    <label>이름: <input type="text" name="name" required /></label><br />
    <label>식사여부:
      <select name="eat" required>
        <option value="">선택</option>
        <option value="한식">한식</option>
        <option value="일식">일식</option>
        <option value="미참여">미참여</option>
      </select>
    </label><br />
    <label>버스 탑승:
      <select name="bus" required>
        <option value="">선택</option>
        <option value="미탑승">미탑승</option>
        <option value="안동탑승">안동탑승</option>
        <option value="광주탑승">광주탑승</option>
        <option value="수원탑승">수원탑승</option>
      </select>
    </label><br />
    <label>동행인원: <input type="number" name="person" min="0" required /></label><br />
    <button type="submit">제출하기</button>
  </form>

  <h3>설문 제출 내역</h3>
  <ul id="surveyList"></ul>

  <script>
    const form = document.getElementById('surveyForm');
    const surveyList = document.getElementById('surveyList');

    // 저장된 설문 데이터를 불러와 화면에 표시
    function loadSurveys() {
      const surveys = JSON.parse(localStorage.getItem('surveys') || '[]');
      surveyList.innerHTML = '';
      surveys.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = `${item.name}님 - 식사: ${item.eat}, 버스: ${item.bus}, 동행: ${item.person}명`;
        surveyList.appendChild(li);
      });
    }

    // 폼 제출 시 데이터 저장
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const newEntry = {
        name: formData.get('name').trim(),
        eat: formData.get('eat'),
        bus: formData.get('bus'),
        person: formData.get('person')
      };

      const surveys = JSON.parse(localStorage.getItem('surveys') || '[]');
      surveys.push(newEntry);
      localStorage.setItem('surveys', JSON.stringify(surveys));

      form.reset();
      loadSurveys();
      alert('제출 완료되었습니다!');
    });

    // 페이지 로드 시 저장 내역 표시
    loadSurveys();
  </script>
</body>
</html>
